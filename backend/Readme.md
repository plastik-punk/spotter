# Backend Template for Spotter

## Start the backend

`mvn spring-boot:run`

## Start the backend with test data

If the database is not clean, the test data won't be inserted

`mvn spring-boot:run -Dspring-boot.run.profiles=generateData`

## Start Test Pipeline

Run complete pipeline test before pushing to Repository

`mvn test`

## Conventions

### Naming DTOs

The name of a DTO always starts with the full name of the entity it represents (e.g. "MessageDetailedDto" representing "
Message")

### Naming Services

The name of a service implementation equals the name of the interface with the suffix "Impl" (e.g. "MessageServiceImpl"
implementing "MessageService")

### Interfaces

Interfaces are always at the top level of their package and the implementation is in a subpackage called "impl"

## Tests

### Naming
- givenX_whenY_thenZ (e.g. givenNothing_whenCreate_then400())
    - X: the input data or special conditions
    - Y: method name + optional test characteristics
    - Z: what is the expected result

### Test Data
- use explicit test data defined in /basetest/TestData (assertions test against these)

### test service implementations
- Each service has a test class in the corresponding package of "unittests"
- use @Transactional for tests that write to the database (e.g. save())
- test each method in isolation with:
  - a positive test
  - a negative test for each expected exception (except ValidationExceptions)

### test validator implementations
- Each validator has a test class in the corresponding package of "unittests"
- test each validator method with:
  - a positive test
  - full test coverage of all validation rules (a negative test for each if-branch adding a validation error)

### test entities
- Each entity has a test class in the corresponding package of "unittests"
- test positive for:
  - equals()
  - build()
  - toString()
  - hashCode()

### test repositories
- Each repository has a test class in the corresponding package of "unittests"
- use @Transactional for tests that write to the database (e.g. save())
- test positive for:
    - saving of entities
    - custom queries and methods (no autogenerated methods)

### test endpoints
- Each endpoint has a test class in the corresponding package of "integrationtest"
- delete contents of each table that is being accessed during testing in a @BeforeEach method
- test end-to-end functionality with one positive test for each method and test for:
  - status code
  - response body