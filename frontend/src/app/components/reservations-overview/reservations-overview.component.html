<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&family=Lexend+Giga:wght@500&display=swap"
      rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Leckerli+One&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">


<div *ngIf="error" class="alert alert-danger alert-dismissible fade show" role="alert">
  <strong>Error! </strong> {{ errorMessage }}
  <button type="button" (click)="vanishError()" class="btn-close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true"></span>
  </button>
</div>

<body>
<div class="top-left-logo">
  <img src="assets/images/logo.png" alt="Logo">
</div>
<div class="container-fluid align-items-center justify-content-center">
  <div class="col-12 col-lg-10 mx-auto h-90 py-3">
    <div class="card custom-card">
      <form class="d-flex flex-row w-auto mb-3" (submit)="loadReservations()">
        <!-- this button is here, just so that simple submitting of this form
             to reload the reservations, is possible -->
        <button type="submit" hidden="hidden">submit</button>
        <div class="ms-1">
          <label for="searchEarliestReservation" class="col-form-label">
            Earliest Date
          </label>
          <!-- pattern and placeholder are fallbacks for browser, that use a simple text input for type="date"
               The date format of the plain HTML date input, in browser that support it is, sadly, not changeable in a cross-browser way
            -->
          <input type="date" id="searchEarliestReservation" name="searchEarliestReservation"
                 pattern="\d{4}-\d{2}-\d{2}"
                 placeholder="yyyy-mm-dd"
                 class="form-control"
                 [(ngModel)]="searchEarliestDate"
                 (ngModelChange)="searchChanged()"
          >
        </div>
        <div class="ms-1">
          <label for="searchLatestReservation" class="col-form-label">
            Latest Date
          </label>
          <!-- pattern and placeholder are fallbacks for browser, that use a simple text input for type="date"
               The date format of the plain HTML date input, in browser that support it is, sadly, not changeable in a cross-browser way
            -->
          <input type="date" id="searchLatestReservation" name="searchLatestReservation"
                 pattern="\d{4}-\d{2}-\d{2}"
                 placeholder="yyyy-mm-dd"
                 class="form-control"
                 [(ngModel)]="searchLatestDate"
                 (ngModelChange)="searchChanged()"
          >
        </div>
        <div class="ms-1">
          <label for="searchEarliestStartTime" class="col-form-label">
            Earliest Start Time
          </label>
          <!-- pattern and placeholder are fallbacks for browser, that use a simple text input for type="date"
               The date format of the plain HTML date input, in browser that support it is, sadly, not changeable in a cross-browser way
            -->
          <input type="time" id="searchEarliestStartTime" name="searchEarliestStartTime"
                 pattern="\d{2}:\d{2}"
                 placeholder="HH:mm"
                 class="form-control"
                 [(ngModel)]="searchEarliestStartTime"
                 (ngModelChange)="searchChanged()">
        </div>
        <div class="ms-1">
          <label for="searchLatestEndTime" class="col-form-label">
            Latest End Time
          </label>
          <!-- pattern and placeholder are fallbacks for browser, that use a simple text input for type="date"
               The date format of the plain HTML date input, in browser that support it is, sadly, not changeable in a cross-browser way
            -->
          <input type="time" id="searchLatestEndTime" name="searchLatestEndTime"
                 pattern="\d{2}:\d{2}"
                 placeholder="HH:mm"
                 class="form-control"
                 [(ngModel)]="searchLatestEndTime"
                 (ngModelChange)="searchChanged()">
        </div>

      </form>

      <table class="table table-hover">
        <thead>
        <tr>
          <th>Date</th>
          <th>Start Time</th>
          <th>End Time</th>
          <th>Name</th>
          <th>Seats</th>
          <th>Table Number</th>
          <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let reservation of displayedReservations">
          <td>{{ reservation.date }}</td>
          <td>{{ reservation.startTime }}</td>
          <td>{{ reservation.endTime }}</td>
          <td>{{ reservation.userFirstName }} {{reservation.userLastName}}</td>
          <td>{{ reservation.pax }}</td>
          <td>{{ reservation.placeId }}</td>
          <td>
            <div class="btn-group">
              <a class="btn btn-sm responsive-info-button"
                 aria-label="Show reservation details">
                <i class="bi bi-info-lg"></i>
              </a>
              <a class="btn btn-sm responsive-warning-button"
                 aria-label="Edit reservation">
                <i class="bi bi-pencil"></i>
              </a>
              <a class="btn btn-sm responsive-danger-button"
                 aria-label="Delete reservation">
                <i class="bi bi-trash"></i>
              </a>
            </div>
          </td>
        </tr>
        <tr>
          <td colspan="7">
            <button (click)="showMore()" *ngIf="displayedReservations.length < reservations.length">Show More</button>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
</body>
